define(function(){"use strict";function e(e,t,a){var r=a.bubbles,n=void 0===r?!0:r,i=a.cancelable,l=void 0===i?!1:i;if(!(t instanceof window.Event)){var u=document.createEvent("Event");u.initEvent(t,n,l),t=u}e.dispatchEvent(t)}function t(e,t){return function(a){delete a[e],Object.defineProperty(a,e,t)}}function a(e){return!(!(e instanceof window.HTMLSelectElement||e instanceof window.HTMLTextAreaElement||e instanceof window.HTMLButtonElement||e instanceof window.HTMLInputElement)||e.type&&!A.includes(e.type)||e.disabled||e.readonly)}function r(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(n)throw i}}return a}function n(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;t>r;r++)a[r-1]=arguments[r];for(var n=a.length,i=0;n>i;i++){var l=a[i];(l instanceof Date||"number"==typeof l||l instanceof Number)&&(l=(l.toLocaleString||l.toString).call(l)),e=e.replace("%s",a[i]),e=e.replace(new RegExp("%"+(i+1)+"\\$s","g"),a[i])}return e}function l(e){var t=Number(e.getAttribute("min")||0),a=Number(e.getAttribute("max")||100),r=Number(e.getAttribute("step")||1),n=Number(e.value||0),i=t+Math.floor((n-t)/r)*r,l=t+(Math.floor((n-t)/r)+1)*r;return t>i?i=null:i>a&&(i=a),l>a?l=null:t>l&&(l=t),[i,l]}function u(e){return e in N?N[e]:e}function s(e){return!a(e)||!e.value||!e.hasAttribute("max")||isNaN(Number(e.getAttribute("max")))||Number(e.value)<=Number(e.getAttribute("max"))}function o(e){return!a(e)||!e.value||!e.hasAttribute("maxlength")||e.value.length>=parseInt(e.getAttribute("maxlength"),10)}function c(e){return!a(e)||!e.value||!e.hasAttribute("min")||isNaN(Number(e.getAttribute("min")))||Number(e.value)>=Number(e.getAttribute("min"))}function m(e){return!a(e)||!e.value||!e.hasAttribute("minlength")||e.value.length>=parseInt(e.getAttribute("minlength"),10)}function f(e){return!a(e)||!e.value||!e.hasAttribute("pattern")||new RegExp("^(?:"+e.getAttribute("pattern")+")$").test(e.value)}function h(e){if(!a(e)||!e.hasAttribute("required"))return!0;switch(e.type){case"checkbox":return e.checked;case"radio":return e.checked||Array.prototype.filter.call(e.form.getElementsByName(e.name),function(t){return t.form===e.form&&t.checked}).length>0;default:return!!e.value}}function v(e){return!a(e)||!e.value||!e.hasAttribute("step")||"any"===e.getAttribute("step").toLowerCase()||Number(e.getAttribute("step"))<=0||isNaN(Number(e.getAttribute("step")))||Math.abs(Number(e.value)-Number(e.getAttribute("min")||0))%Number(e.getAttribute("step"))<1e-8||Math.abs(Number(e.value)-Number(e.getAttribute("min")||0))%Number(e.getAttribute("step"))>Number(e.getAttribute("step"))-1e-8}function b(e){if(!a(e)||!e.value||!P.contains(e.type))return!0;var t=!0;switch(e.type){case"url":x.href=e.value,t=x.href===e.value||x.href===e.value+"/";break;case"email":t=e.hasAttribute("multiple")?e.value.split(",").map(function(e){return e.trim()}).every(function(e){return M.test(e)}):M.test(e.value)}return t}function d(){if(this instanceof window.HTMLFormElement)return Array.prototype.every.call(this.elements,d);var t=!0;return a(this)&&(t=k(this).valid,t||e(this,"invalid",{cancelable:!0})),t}function g(e){e.is_custom=!0,w.set(this,e)}function p(){var e=w.get(this);return e?e:""}function y(){return a(this)}var A=["checkbox","color","date","datetime","datetime-local","email","file","image","month","number","password","radio","range","search","submit","tel","text","time","url","week"],w=new WeakMap,N={},P=["email","url"],x=document.createElement("a"),M=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,E={badInput:function(e){return!1},customError:function(e){var t=w.get(e),a=t&&"is_custom"in t;return a},patternMismatch:function(e){var t=!f(e);return t&&w.set(e,e.title?i(u("Please match the requested format: %s."),e.title):u("Please match the requested format.")),t},rangeOverflow:function(e){var t=!s(e);if(t){var a=void 0;switch(e.type){case"date":case"datetime":case"datetime-local":case"time":a=i(u("Please select a value that is no later than %s."),e.value);break;case"number":default:a=i(u("Please select a value that is no more than %s."),e.value)}w.set(e,a)}return t},rangeUnderflow:function(e){var t=!c(e);if(t){var a=void 0;switch(e.type){case"date":case"datetime":case"datetime-local":case"time":a=i(u("Please select a value that is no earlier than %s."),e.value);break;case"number":default:a=i(u("Please select a value that is no less than %s."),e.value)}w.set(e,a)}return t},stepMismatch:function(e){var t=!v(e);if(t){var a=l(e),r=n(a,2),s=r[0],o=r[1],c=!1;null===s?c=o:null===o&&(c=s),c!==!1?w.set(e,i(u("Please select a valid value. The nearest valid value is %s."),c)):w.set(e,i(u("Please select a valid value. The two nearest valid values are %s and %s."),s,o))}return t},tooLong:function(e){var t=!o(e);return t&&w.set(e,i(u("Please shorten this text to %s characters or less (you are currently using %s characters)."),e.getAttribute("maxlength"),e.value.length)),t},tooShort:function(e){var t=!m(e);return t&&w.set(e,i(u("Please lengthen this text to %s characters or more (you are currently using %s characters)."),e.getAttribute("maxlength"),e.value.length)),t},typeMismatch:function(e){var t=!b(e);if(t){var a=u("Please use the appropriate format.");"email"===e.type?a=u(e.hasAttribute("multiple")?"Please enter a comma separated list of email addresses.":"Please enter an email address."):"url"===e.type&&(a=u("Please enter a URL.")),w.set(e,a)}return t},valueMissing:function(e){var t=!h(e);if(t){var a=u("Please fill out this field.");"checkbox"===e.type?a=u("Please check this box if you want to proceed."):"radio"===e.type?a=u("Please select one of these options."):"file"===e.type?a=u(e.hasAttribute("multiple")?"Please select one or more files.":"Please select a file."):e instanceof window.HTMLSelectElement&&(a=u("Please select an item in the list.")),w.set(e,a)}return t}},k=function z(e){var t=z.cache.get(e);return t?t:this instanceof z?(this.element=e,void z.cache.set(e,this)):new z(e)},L={};k.prototype=L,k.cache=new WeakMap;for(var T in E)Object.defineProperty(L,T,{configurable:!0,enumerable:!0,get:function(e){return function(){return e(this.element)}}(E[T]),set:void 0});Object.defineProperty(L,"valid",{configurable:!0,enumerable:!0,get:function(){for(var e in E)if(E[e](this.element))return!1;return!0},set:void 0}),k.install=t("validity",{configurable:!0,enumerable:!0,value:function(){return new k(this)},writable:!1}),d.install=t("checkValidity",{configurable:!0,enumerable:!0,value:d,writable:!0}),g.install=t("setCustomValidity",{configurable:!0,enumerable:!0,get:g,set:void 0}),p.install=t("validationMessage",{configurable:!0,enumerable:!0,get:p,set:void 0}),y.install=t("willValidate",{configurable:!0,enumerable:!0,get:y,set:void 0});var S={checkValidity:d,setCustomValidity:g,validationMessage:p,ValidityState:k,willValidate:y,update_form:function(e){for(var t=e.elements,a=t.length,r=0;a>r;r++)d.install(t[r]),g.install(t[r]),p.install(t[r]),k.install(t[r]),y.install(t[r])}};window.hyperform=S});
